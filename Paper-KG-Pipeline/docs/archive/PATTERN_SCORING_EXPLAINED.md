# Pattern ç®—åˆ†æœºåˆ¶è¯¦è§£

## ğŸ“Š æ ¸å¿ƒé—®é¢˜ï¼šPattern å¾—åˆ†å¦‚ä½•è®¡ç®—ï¼Ÿ

### ç®—åˆ†æµç¨‹

```
ç”¨æˆ·è¾“å…¥ Idea
    â†“
ä¸‰è·¯å¹¶è¡Œå¬å›
    â”œâ”€ è·¯å¾„1ï¼šç›¸ä¼¼ Idea â†’ Pattern (å¾—åˆ†1)
    â”œâ”€ è·¯å¾„2ï¼šç›¸å…³ Domain â†’ Pattern (å¾—åˆ†2)
    â””â”€ è·¯å¾„3ï¼šç›¸ä¼¼ Paper â†’ Pattern (å¾—åˆ†3)
    â†“
åŠ æƒèåˆ
    æœ€ç»ˆå¾—åˆ† = å¾—åˆ†1 Ã— 0.4 + å¾—åˆ†2 Ã— 0.2 + å¾—åˆ†3 Ã— 0.4
    â†“
æ’åºå¹¶è¿”å› Top-10
```

---

## ğŸ” ä¸‰è·¯å¬å›çš„ç‹¬ç«‹ç®—åˆ†æœºåˆ¶

### è·¯å¾„1ï¼šç›¸ä¼¼ Idea å¬å›

**å¬å›æµç¨‹**ï¼š
```
ç”¨æˆ· Idea â†’ è®¡ç®—ä¸å›¾è°±ä¸­æ‰€æœ‰ Idea çš„ç›¸ä¼¼åº¦ â†’ Top-10 ç›¸ä¼¼ Idea â†’ ç›´æ¥è·å– Idea.pattern_ids â†’ Pattern
```

**ç®—åˆ†é€»è¾‘**ï¼š
```python
for idea_id, similarity in top_10_ideas:
    for pattern_id in idea.pattern_ids:
        pattern_scores[pattern_id] += similarity
```

**å…³é”®ç‚¹**ï¼š
- æ¯ä¸ª Pattern çš„å¾—åˆ† = **æ‰€æœ‰å¼•ç”¨å®ƒçš„ç›¸ä¼¼ Idea çš„ç›¸ä¼¼åº¦ä¹‹å’Œ**
- å¦‚æœ 3 ä¸ªç›¸ä¼¼ Idea éƒ½ä½¿ç”¨äº† Pattern_5ï¼Œåˆ™ Pattern_5 çš„å¾—åˆ†ä¼šç´¯åŠ  3 æ¬¡
- **æœ€ç»ˆåªä¿ç•™å¾—åˆ†æœ€é«˜çš„ Top-10 ä¸ª Pattern**

**ç¤ºä¾‹**ï¼š
```
ç”¨æˆ· Idea: "ä½¿ç”¨ Transformer è¿›è¡Œæ–‡æœ¬åˆ†ç±»"

ç›¸ä¼¼ Idea_1 (ç›¸ä¼¼åº¦ 0.8) â†’ [Pattern_5, Pattern_10]
ç›¸ä¼¼ Idea_2 (ç›¸ä¼¼åº¦ 0.7) â†’ [Pattern_5, Pattern_20]
ç›¸ä¼¼ Idea_3 (ç›¸ä¼¼åº¦ 0.6) â†’ [Pattern_10]

è·¯å¾„1å¾—åˆ†ï¼š
  Pattern_5: 0.8 + 0.7 = 1.5
  Pattern_10: 0.8 + 0.6 = 1.4
  Pattern_20: 0.7 = 0.7
```

---

### è·¯å¾„2ï¼šé¢†åŸŸç›¸å…³å¬å›

**å¬å›æµç¨‹**ï¼š
```
ç”¨æˆ· Idea â†’ åŒ¹é…ç›¸å…³ Domain â†’ Top-5 Domain â†’ åœ¨è¿™äº› Domain ä¸­è¡¨ç°å¥½çš„ Pattern
```

**ç®—åˆ†é€»è¾‘**ï¼š
```python
for domain_id, domain_weight in top_5_domains:
    for pattern_id in patterns_in_domain:
        score = domain_weight Ã— effectiveness Ã— confidence
        pattern_scores[pattern_id] += score
```

**å…³é”®ç‚¹**ï¼š
- `effectiveness`ï¼šPattern åœ¨è¯¥ Domain ä¸­çš„æ•ˆæœå¢ç›Šï¼ˆç›¸å¯¹åŸºçº¿ï¼‰
- `confidence`ï¼šåŸºäºæ ·æœ¬æ•°çš„ç½®ä¿¡åº¦ï¼ˆæ ·æœ¬è¶Šå¤šè¶Šå¯ä¿¡ï¼‰
- **æœ€ç»ˆåªä¿ç•™å¾—åˆ†æœ€é«˜çš„ Top-5 ä¸ª Pattern**ï¼ˆè¾…åŠ©é€šé“ï¼‰

---

### è·¯å¾„3ï¼šç›¸ä¼¼ Paper å¬å›

**å¬å›æµç¨‹**ï¼š
```
ç”¨æˆ· Idea â†’ è®¡ç®—ä¸å›¾è°±ä¸­æ‰€æœ‰ Paper çš„ç›¸ä¼¼åº¦ â†’ Top-20 ç›¸ä¼¼ Paper â†’ è·å– Paper ä½¿ç”¨çš„ Pattern
```

**ç®—åˆ†é€»è¾‘**ï¼š
```python
for paper_id, similarity, paper_quality in top_20_papers:
    for pattern_id in paper.pattern_ids:
        pattern_quality = edge[paper][pattern]['quality']
        score = similarity Ã— paper_quality Ã— pattern_quality
        pattern_scores[pattern_id] += score
```

**å…³é”®ç‚¹**ï¼š
- ç»¼åˆè€ƒè™‘ Paper ä¸ç”¨æˆ· Idea çš„ç›¸ä¼¼åº¦ã€Paper è´¨é‡ã€Pattern è´¨é‡
- å¦‚æœå¤šä¸ªç›¸ä¼¼ Paper éƒ½ä½¿ç”¨äº†åŒä¸€ä¸ª Patternï¼Œå¾—åˆ†ä¼šç´¯åŠ 
- **æœ€ç»ˆåªä¿ç•™å¾—åˆ†æœ€é«˜çš„ Top-10 ä¸ª Pattern**

---

## âš–ï¸ å¤šè·¯èåˆï¼šå¦‚ä½•é¿å…é‡å¤è®¡ç®—ï¼Ÿ

### é‡è¦åŸåˆ™ï¼š**å„è·¯å¬å›ç‹¬ç«‹ç®—åˆ†ï¼Œä¸ä¼šé‡å¤è®¡ç®—ç›¸ä¼¼åº¦**

**èåˆé€»è¾‘**ï¼š
```python
# å‡è®¾ Pattern_5 åœ¨ä¸‰ä¸ªè·¯å¾„ä¸­éƒ½è¢«å¬å›äº†
final_score = (
    path1_scores['pattern_5'] * 0.4 +  # è·¯å¾„1ï¼šIdea ç›¸ä¼¼åº¦ç´¯åŠ 
    path2_scores['pattern_5'] * 0.2 +  # è·¯å¾„2ï¼šDomain æ•ˆæœåŠ æƒ
    path3_scores['pattern_5'] * 0.4    # è·¯å¾„3ï¼šPaper ç›¸ä¼¼åº¦ç´¯åŠ 
)
```

### ç¤ºä¾‹ï¼šPattern_5 çš„å®Œæ•´ç®—åˆ†è¿‡ç¨‹

```
è·¯å¾„1ï¼šç›¸ä¼¼ Idea å¬å›
  - Idea_10 (ç›¸ä¼¼åº¦ 0.8) ä½¿ç”¨äº† Pattern_5
  - Idea_25 (ç›¸ä¼¼åº¦ 0.7) ä½¿ç”¨äº† Pattern_5
  â†’ è·¯å¾„1å¾—åˆ† = 0.8 + 0.7 = 1.5

è·¯å¾„2ï¼šé¢†åŸŸç›¸å…³å¬å›
  - Domain_3 (æƒé‡ 0.6) ä¸­ Pattern_5 æ•ˆæœå¥½
  - effectiveness = 0.12, confidence = 0.8
  â†’ è·¯å¾„2å¾—åˆ† = 0.6 Ã— 0.12 Ã— 0.8 = 0.0576

è·¯å¾„3ï¼šç›¸ä¼¼ Paper å¬å›
  - Paper_A (ç›¸ä¼¼åº¦ 0.75, è´¨é‡ 0.8) ä½¿ç”¨äº† Pattern_5 (è´¨é‡ 0.9)
  - Paper_B (ç›¸ä¼¼åº¦ 0.65, è´¨é‡ 0.7) ä½¿ç”¨äº† Pattern_5 (è´¨é‡ 0.85)
  â†’ è·¯å¾„3å¾—åˆ† = 0.75Ã—0.8Ã—0.9 + 0.65Ã—0.7Ã—0.85 = 0.54 + 0.386 = 0.926

æœ€ç»ˆèåˆï¼š
  final_score = 1.5 Ã— 0.4 + 0.0576 Ã— 0.2 + 0.926 Ã— 0.4
              = 0.6 + 0.0115 + 0.3704
              = 0.9819
```

---

## ğŸ¯ å¬å›æ•°é‡æ§åˆ¶ç­–ç•¥

### V3.2 ç‰ˆæœ¬æ›´æ–°ï¼ˆ2026-01-22ï¼‰

| è·¯å¾„ | å¬å›é€»è¾‘ | ä¸­é—´å¬å›æ•° | æœ€ç»ˆä¿ç•™æ•° | æƒé‡ | é‡è¦æ€§ |
|------|---------|-----------|-----------|------|--------|
| **è·¯å¾„1** | ç›¸ä¼¼ Idea â†’ Pattern | æ‰€æœ‰ | **Top-10** | 0.4 | â­â­â­ é‡è¦ |
| **è·¯å¾„2** | Domain â†’ Pattern | æ‰€æœ‰ | **Top-5** | 0.2 | â­â­ è¾…åŠ© |
| **è·¯å¾„3** | ç›¸ä¼¼ Paper â†’ Pattern | æ‰€æœ‰ | **Top-10** | 0.4 | â­â­â­ é‡è¦ |

### è°ƒæ•´ç†ç”±

1. **è·¯å¾„1 & è·¯å¾„3 æ›´é‡è¦**ï¼š
   - ç›´æ¥åŸºäºç”¨æˆ· Idea çš„ç›¸ä¼¼åº¦è®¡ç®—
   - æ›´ç²¾å‡†åœ°æ•æ‰ç”¨æˆ·éœ€æ±‚
   - å„ä¿ç•™ Top-10ï¼Œç¡®ä¿è´¨é‡

2. **è·¯å¾„2 ä½œä¸ºè¾…åŠ©**ï¼š
   - æä¾›é¢†åŸŸæ³›åŒ–èƒ½åŠ›
   - é¿å…å¬å›è¿‡å¤šå™ªéŸ³
   - åªä¿ç•™ Top-5 ä¸ªæœ€ä¼˜ç§€çš„ Pattern

3. **æƒé‡åˆ†é…**ï¼š
   - è·¯å¾„1 (0.4)ï¼šå†å²æˆåŠŸç»éªŒï¼Œé«˜å‡†ç¡®æ€§
   - è·¯å¾„2 (0.2)ï¼šé¢†åŸŸæ³›åŒ–ï¼Œè¾…åŠ©è¡¥å……
   - è·¯å¾„3 (0.4)ï¼šé«˜è´¨é‡ Paper å¯¼å‘

---

## ğŸ”¬ å®é™…å¬å›æ•ˆæœç¤ºä¾‹

### æµ‹è¯•ç”¨ä¾‹
```
ç”¨æˆ· Idea: "Use distillation techniques to perform a cross-domain
           text classification task using Transformer"
```

### å¬å›ç»Ÿè®¡
```
ğŸ” [è·¯å¾„1] ç›¸ä¼¼ Idea å¬å›...
  âœ“ å¬å› 6 ä¸ª Patternï¼Œä¿ç•™ Top-10

ğŸŒ [è·¯å¾„2] é¢†åŸŸç›¸å…³æ€§å¬å›...
  âœ“ å¬å› 120 ä¸ª Patternï¼Œä¿ç•™ Top-5

ğŸ“„ [è·¯å¾„3] ç›¸ä¼¼ Paper å¬å›...
  âœ“ å¬å› 10 ä¸ª Patternï¼Œä¿ç•™ Top-10

ğŸ”— èåˆä¸‰è·¯å¬å›ç»“æœ...
  å»é‡åå…± 15 ä¸ªå€™é€‰ Pattern â†’ æœ€ç»ˆ Top-10
```

### æœ€ç»ˆç»“æœç¤ºä¾‹
```
ã€Rank 1ã€‘ pattern_111 - Reframing Zero-Shot Generalization
  æœ€ç»ˆå¾—åˆ†: 0.6571
  - è·¯å¾„1 (ç›¸ä¼¼Idea):   0.5257 (å æ¯” 80.0%)  â† ä¸»è¦è´¡çŒ®
  - è·¯å¾„2 (é¢†åŸŸç›¸å…³):   0.0000 (å æ¯” 0.0%)
  - è·¯å¾„3 (ç›¸ä¼¼Paper):  0.1314 (å æ¯” 20.0%)
```

---

## âœ… æ ¸å¿ƒä¼˜åŠ¿

### 1. å¤šç»´åº¦è¯„ä¼°
- **è·¯å¾„1**ï¼šå†å²ç»éªŒï¼ˆä»€ä¹ˆ Idea ä½¿ç”¨äº†ä»€ä¹ˆ Patternï¼‰
- **è·¯å¾„2**ï¼šé¢†åŸŸæ•ˆæœï¼ˆä»€ä¹ˆ Pattern åœ¨ä»€ä¹ˆé¢†åŸŸæœ‰æ•ˆï¼‰
- **è·¯å¾„3**ï¼šè´¨é‡å¯¼å‘ï¼ˆé«˜è´¨é‡ Paper ä½¿ç”¨äº†ä»€ä¹ˆ Patternï¼‰

### 2. å¾—åˆ†å¯è¿½æº¯
- æ¯ä¸ª Pattern çš„å¾—åˆ†éƒ½å¯ä»¥æ‹†è§£ä¸ºä¸‰è·¯è´¡çŒ®
- ç”¨æˆ·å¯ä»¥ç†è§£"ä¸ºä»€ä¹ˆæ¨èè¿™ä¸ª Pattern"

### 3. æƒé‡å¯è°ƒæ•´
```python
# ä¿å®ˆå†™ä½œï¼ˆä¾èµ–å†å²ç»éªŒï¼‰
PATH1_WEIGHT = 0.6
PATH2_WEIGHT = 0.2
PATH3_WEIGHT = 0.2

# æ–°é¢– Ideaï¼ˆæé«˜é¢†åŸŸæ³›åŒ–ï¼‰
PATH1_WEIGHT = 0.2
PATH2_WEIGHT = 0.5
PATH3_WEIGHT = 0.3

# è¿½æ±‚é«˜è´¨é‡ï¼ˆåå‘é¡¶ä¼šè®ºæ–‡ï¼‰
PATH1_WEIGHT = 0.2
PATH2_WEIGHT = 0.2
PATH3_WEIGHT = 0.6
```

---

## ğŸ”§ é…ç½®å‚æ•°

### recall_system.py
```python
class RecallConfig:
    # è·¯å¾„1ï¼šç›¸ä¼¼ Idea å¬å›
    PATH1_TOP_K_IDEAS = 10
    PATH1_FINAL_TOP_K = 10
    PATH1_WEIGHT = 0.4

    # è·¯å¾„2ï¼šé¢†åŸŸç›¸å…³å¬å›
    PATH2_TOP_K_DOMAINS = 5
    PATH2_FINAL_TOP_K = 5
    PATH2_WEIGHT = 0.2

    # è·¯å¾„3ï¼šç›¸ä¼¼ Paper å¬å›
    PATH3_TOP_K_PAPERS = 20
    PATH3_FINAL_TOP_K = 10
    PATH3_WEIGHT = 0.4

    # æœ€ç»ˆè¾“å‡º
    FINAL_TOP_K = 10
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [RECALL_SUMMARY.md](RECALL_SUMMARY.md) - å¬å›ç³»ç»Ÿæ€»ç»“
- [EDGE_TYPES.md](EDGE_TYPES.md) - çŸ¥è¯†å›¾è°±è¾¹ç±»å‹è¯´æ˜
- [TWO_STAGE_RECALL_OPTIMIZATION.md](TWO_STAGE_RECALL_OPTIMIZATION.md) - ä¸¤é˜¶æ®µå¬å›ä¼˜åŒ–
- [SIMILARITY_FIX_SUMMARY.md](../SIMILARITY_FIX_SUMMARY.md) - ç›¸ä¼¼åº¦è®¡ç®—æ”¹è¿›

